## `types.h` 结构总结表格

### 基础类型与索引

| 变量/类型       | 作用          | 说明                                      | 案例                                            |
| --------------- | ------------- | ----------------------------------------- | ----------------------------------------------- |
| `index_t`       | 索引类型      | 代表点、顶点、面等索引                    | `Point::idx()` 获取点索引                       |
| `INVALID_INDEX` | 无效索引      | 代表未初始化的索引                        | `Vertex::pre_vertex() == INVALID_INDEX`         |
| `size_t`        | 标准 `size_t` | 用于存储大小 / 长度等                     | `std::vector<size_t> indices;`                  |
| `triangle_t`    | 三角形索引    | `Eigen::Vector3<index_t>`，用于存储三角形 | `triangle_t(0, 1, 2)` 代表索引 `0,1,2` 的三角形 |

### 几何 / 拓扑

| 变量/类型         | 作用       | 说明                           | 案例                           |
| ----------------- | ---------- | ------------------------------ | ------------------------------ |
| `Point`           | 几何点     | 代表 `Mesh` 的点数据           | 矩形的 4 个角点                |
| `Vertex`          | 拓扑顶点   | 连接 `Point` 和 `Prim`         | 立方体每个面上的 4 个 `Vertex` |
| `Prim`            | 几何元     | 代表 `Polygon`、`Polyline`     | 立方体的 6 个 `Prim`           |
| `Edge`            | 无向边     | 连接两个 `Point`               | 矩形的四条边                   |
| `HalfEdge`        | 有向边     | 记录起点和终点                 | `HalfEdge(0,1)` 代表 0 → 1     |
| `PointContainer`  | 点的容器   | `MeshElementContainer<Point>`  | `PointContainer points;`       |
| `VertexContainer` | 顶点的容器 | `MeshElementContainer<Vertex>` | `VertexContainer vertices;`    |
| `PrimContainer`   | 面的容器   | `MeshElementContainer<Prim>`   | `PrimContainer polygons;`      |

### Mesh 相关

| 变量/类型  | 作用             | 说明             | 案例                                         |
| ---------- | ---------------- | ---------------- | -------------------------------------------- |
| `NMesh`    | 几何网格         | 代表 `Mesh` 数据 | `NMeshPtr mesh = std::make_shared<NMesh>();` |
| `NMeshPtr` | `NMesh` 智能指针 | 共享 `Mesh` 数据 | `NMeshPtr new_mesh = old_mesh;`              |

### 线性代数 / 空间几何

| 变量/类型         | 作用              | 说明                                   | 案例                                      |
| ----------------- | ----------------- | -------------------------------------- | ----------------------------------------- |
| `AABB2 / AABB3`   | 二维 / 三维包围盒 | `Eigen::AlignedBox<scalar, 2/3>`       | `AABB3 bbox = mesh.computeBoundingBox();` |
| `Line2 / Line3`   | 二维 / 三维直线   | `Eigen::ParametrizedLine<scalar, 2/3>` | `Line3 ray(pos, dir);`                    |
| `Plane2 / Plane3` | 二维 / 三维平面   | `Eigen::Hyperplane<scalar, 2/3>`       | `Plane3 ground(normal, point);`           |

### 枚举

| 变量/类型        | 作用     | 说明                                  | 案例                               |
| ---------------- | -------- | ------------------------------------- | ---------------------------------- |
| `AttributeClass` | 属性分类 | `Point / Vertex / Prim / Global`      | `AttributeClass::Point` 代表点属性 |
| `PrimType`       | 几何类型 | `Polygon / Polyline / Instance / VDB` | `PrimType::Polygon` 代表多边形     |
| `GroupType`      | 分组类型 | `Point / Vertex / Prim / Edge`        | `GroupType::Edge` 代表边           |

### 版本管理

| 变量/类型                 | 作用     | 说明                        | 案例                      |
| ------------------------- | -------- | --------------------------- | ------------------------- |
| `DataVersion`             | 版本控制 | 记录 `major / minor` 版本号 | `DataVersion v1 = {1,0};` |
| `operator== / operator!=` | 版本比较 | 比较 `DataVersion` 是否相等 | `if (v1 == v2) {...}`     |

### 属性（Attribute）

| 变量/类型                                       | 作用         | 说明                    | 案例                                |
| ----------------------------------------------- | ------------ | ----------------------- | ----------------------------------- |
| `AttributeBase`                                 | 属性基类     | 所有 `Attribute` 的基类 | `AttributeBasePtr attr;`            |
| `FloatAttribute / IntAttribute / BoolAttribute` | 基本属性     | 存储 `float, int, bool` | `FloatAttribute::set(0.5f);`        |
| `Vec2Attribute / Vec3Attribute / Vec4Attribute` | 向量属性     | `vec2f, vec3f, vec4f`   | `Vec3Attribute::set(pos_t(1,2,3));` |
| `PosAttribute`                                  | 三维坐标属性 | `vec3` 形式存储点位     | `pos_t(0,0,0)` 代表原点             |

### 额外功能

| 变量/类型                                                    | 作用         | 说明                              | 案例                                    |
| ------------------------------------------------------------ | ------------ | --------------------------------- | --------------------------------------- |
| `AttributeMap`                                               | 属性映射     | 关联属性名称和 `AttributeBasePtr` | `attr_map["color"] = my_color_attr;`    |
| `AttributeRHandle / AttributeRWHandle / AttributeUnsafeRWHandle` | 属性读写句柄 | 读 / 写 / 非安全写入属性          | `AttributeRWHandle<float> attr_handle;` |

### 哈希 / 序列化

| 变量/类型                      | 作用     | 说明                        | 案例                                                |
| ------------------------------ | -------- | --------------------------- | --------------------------------------------------- |
| `std::hash<Eigen::Matrix>`     | 矩阵哈希 | 用于 `Eigen` 矩阵的哈希计算 | `std::unordered_set<Eigen::Matrix3f> matrix_set;`   |
| `std::hash<nous::Edge>`        | 边哈希   | 存储 `Edge` 的哈希值        | `std::unordered_set<Edge> edge_set;`                |
| `std::hash<nous::DataVersion>` | 版本哈希 | 用于存储 `DataVersion`      | `std::unordered_map<DataVersion, int> version_map;` |

### 属性名称映射

| 变量/类型                  | 作用             | 说明             | 案例                                         |
| -------------------------- | ---------------- | ---------------- | -------------------------------------------- |
| `attrib_type::nameof<T>`   | 获取属性类型名称 | 用于调试 / 反射  | `attrib_type::nameof<float>::value == "F32"` |
| `name_of_attrib_type<T>()` | 属性类型名称函数 | 运行时获取类型名 | `name_of_attrib_type<int>() == "I32"`        |

### 总结

`types.h` 提供：

1. 基础类型（索引 / 数学结构）
2. 几何拓扑（点 / 线 / 面）
3. Mesh 结构
4. 属性（点属性 / 面属性等）
5. 哈希 / 版本管理
6. 字符串 / 类型映射

## `mesh_element.h` 结构总结表格

### 核心几何数据结构

| 变量/类型         | 作用       | 说明                                       | 案例                        |
| ----------------- | ---------- | ------------------------------------------ | --------------------------- |
| `Point`           | 几何点     | 代表 `Mesh` 的几何点，存储 `Vertex` 的指针 | 立方体的 8 个 `Point`       |
| `Vertex`          | 拓扑顶点   | 连接 `Point` 和 `Prim`，构成拓扑结构       | 矩形的 4 个 `Vertex`        |
| `Prim`            | 几何元     | 代表 `Polygon`、`Polyline` 等              | 立方体的 6 个 `Prim`        |
| `Edge`            | 无向边     | 连接两个 `Point`，用于定义拓扑结构         | 立方体的 12 条 `Edge`       |
| `HalfEdge`        | 有向边     | 记录起点和终点的方向信息                   | `HalfEdge(0,1)` 代表 0 → 1  |
| `PointContainer`  | 点的容器   | `MeshElementContainer<Point>`              | `PointContainer points;`    |
| `VertexContainer` | 顶点的容器 | `MeshElementContainer<Vertex>`             | `VertexContainer vertices;` |
| `PrimContainer`   | 面的容器   | `MeshElementContainer<Prim>`               | `PrimContainer polygons;`   |

`m_index`, `m_vertex`, `m_point` 之间的关系

| 变量       | 所属类                    | 作用                                                  | 具体存储数据                                                | 示例                                                         |
| ---------- | ------------------------- | ----------------------------------------------------- | ----------------------------------------------------------- | ------------------------------------------------------------ |
| `m_index`  | `Point`、`Vertex`、`Prim` | 唯一索引，在 `Mesh` 里的索引                          | 存储当前 `Point`、`Vertex` 或 `Prim` 在 `Mesh` 中的索引编号 | `m_index = 37` 代表这是 `Mesh` 中第 37 个 `Vertex`           |
| `m_vertex` | `Point`                   | 指向 `Vertex`，表示该 `Point` 对应的拓扑 `Vertex`     | `m_vertex = Vertex*`                                        | `m_point->m_vertex` 指向 `Vertex 37`，表示该 `Point` 关联这个 `Vertex` |
| `m_point`  | `Vertex`                  | 指向 `Point`，表示该 `Vertex` 依附的几何 `Point`      | `m_point = Point*`                                          | `m_vertex->m_point` 指向 `Point 15`，说明 `Vertex 37` 依附 `Point 15` |
| `m_prim`   | `Vertex`                  | 指向 `Prim`，表示该 `Vertex` 属于某个 `Polygon`（面） | `m_prim = Prim*`                                            | `m_vertex->m_prim` 关联 `Prim 4`，表示该 `Vertex` 属于 `Polygon 4` |
| `m_vertex` | `Prim`                    | 指向 `Vertex`，表示该 `Prim` 的起点 `Vertex`          | `m_vertex = Vertex*`                                        | `m_prim->m_vertex` 指向 `Vertex 0`，代表 `Polygon` 的起始 `Vertex` |

### `Point` 结构

| 变量/类型               | 作用            | 说明                         | 案例                               |
| ----------------------- | --------------- | ---------------------------- | ---------------------------------- |
| `Vertex* m_vertex`      | 绑定的 `Vertex` | `Point` 绑定的 `Vertex`      | `point->vertex_ptr()->idx()`       |
| `index_t m_index`       | 点的索引        | `Point` 的唯一索引           | `point->idx()` 返回 `index_t`      |
| `vertex_ptr()`          | 获取 `Vertex`   | 返回 `Point` 绑定的 `Vertex` | `Vertex* v = point->vertex_ptr();` |
| `set_vertex(Vertex* v)` | 设置 `Vertex`   | 绑定 `Point` 与 `Vertex`     | `point->set_vertex(v);`            |

### `Vertex` 结构

| 变量/类型                     | 作用                       | 说明                          | 案例                              |
| ----------------------------- | -------------------------- | ----------------------------- | --------------------------------- |
| `Point* m_point`              | 绑定的 `Point`             | `Vertex` 绑定的 `Point`       | `vertex->point_ptr()->idx()`      |
| `Prim* m_prim`                | 所属 `Prim`                | 该 `Vertex` 归属于的 `Prim`   | `vertex->prim_ptr()->idx()`       |
| `Vertex* m_pre_vertex`        | 前一个 `Vertex`            | 在 `Prim` 中的前一个 `Vertex` | `vertex->pre_vertex_ptr()`        |
| `Vertex* m_next_vertex`       | 下一个 `Vertex`            | 在 `Prim` 中的下一个 `Vertex` | `vertex->next_vertex_ptr()`       |
| `Vertex* m_pre_point_vertex`  | 前一个 `Point` 的 `Vertex` | 同 `Point` 关联的 `Vertex`    | `vertex->pre_point_vertex_ptr()`  |
| `Vertex* m_next_point_vertex` | 下一个 `Point` 的 `Vertex` | 同 `Point` 关联的 `Vertex`    | `vertex->next_point_vertex_ptr()` |

### `Prim` 结构

| 变量/类型                            | 作用            | 说明                            | 案例                                |
| ------------------------------------ | --------------- | ------------------------------- | ----------------------------------- |
| `Vertex* m_vertex`                   | 绑定的 `Vertex` | 关联的 `Vertex`                 | `prim->vertex_ptr()->idx()`         |
| `std::atomic<uint32> m_num_vertices` | 顶点数量        | 该 `Prim` 的顶点数              | `prim->num_vertices()`              |
| `PrimType m_type`                    | 几何类型        | `Polygon / Polyline / Instance` | `prim->type() == PrimType::Polygon` |
| `index_t m_index`                    | `Prim` 的索引   | `Prim` 的唯一索引               | `prim->idx()`                       |

### `Edge` / `HalfEdge`

| 变量/类型    | 作用       | 说明                       | 案例                             |
| ------------ | ---------- | -------------------------- | -------------------------------- |
| `Edge`       | 无向边     | 连接两个 `Point`           | `Edge e(0,1);`                   |
| `HalfEdge`   | 有向边     | 连接两个 `Point`，包含方向 | `HalfEdge(0,1);`                 |
| `operator==` | 边相等判断 | 判断两个 `Edge` 是否相等   | `Edge(0,1) == Edge(1,0) // true` |
| `operator!=` | 边不等判断 | 判断两个 `Edge` 是否不同   | `Edge(0,1) != Edge(2,3) // true` |

### `Vertex` 相关方法

| 方法                          | 作用                         | 说明                              | 案例                           |
| ----------------------------- | ---------------------------- | --------------------------------- | ------------------------------ |
| `index_t prim()`              | 获取 `Prim` 索引             | 返回 `Prim` 的 `index_t`          | `vertex->prim();`              |
| `index_t point()`             | 获取 `Point` 索引            | 返回 `Point` 的 `index_t`         | `vertex->point();`             |
| `index_t pre_vertex()`        | 获取前一个 `Vertex`          | 返回 `前一个 Vertex` 的索引       | `vertex->pre_vertex();`        |
| `index_t next_vertex()`       | 获取下一个 `Vertex`          | 返回 `下一个 Vertex` 的索引       | `vertex->next_vertex();`       |
| `index_t pre_point_vertex()`  | 获取 `Point` 之前的 `Vertex` | 返回 `前一个` `Point` 的 `Vertex` | `vertex->pre_point_vertex();`  |
| `index_t next_point_vertex()` | 获取 `Point` 之后的 `Vertex` | 返回 `下一个` `Point` 的 `Vertex` | `vertex->next_point_vertex();` |

`m_vertex` 与 `m_point`

| 属性     | m_vertex (Vertex)                                            | m_point (Point)                                |
| -------- | ------------------------------------------------------------ | ---------------------------------------------- |
| 作用     | 表示拓扑结构，连接到 `Prim`，用于构建 `Polygon`、`Ring`、`Line` | 表示几何点，存储 坐标信息                      |
| 存储内容 | 连接关系（`pre_vertex`、`next_vertex`）                      | 点的位置（可能被多个 `Vertex` 共享）           |
| 属于     | `Prim`（例如 `Ring`、`Polygon`）                             | `Mesh`（用于存储 `Point` 数据）                |
| 索引方式 | `vertex_ptr()` 访问 `m_vertex`                               | `point_ptr()` 访问 `m_point`                   |
| 拓扑信息 | `m_pre_vertex`, `m_next_vertex` 形成环                       | `m_vertex` 可能被多个 `Vertex` 关联            |
| 示例     | `polygon->ring->ring_prim->m_vertex;`                        | `polygon->ring->ring_prim->m_vertex->m_point;` |

### `Prim` 相关方法

| 方法                    | 作用                 | 说明                                     | 案例                    |
| ----------------------- | -------------------- | ---------------------------------------- | ----------------------- |
| `bool is_valid()`       | 检查 `Prim` 是否有效 | `m_vertex != nullptr` 时有效             | `prim->is_valid();`     |
| `index_t idx()`         | 获取 `Prim` 索引     | 返回 `Prim` 的 `index_t`                 | `prim->idx();`          |
| `PrimType type()`       | 获取 `Prim` 类型     | `Polygon / Polyline / Instance`          | `prim->type();`         |
| `index_t vertex()`      | 获取 `Vertex` 索引   | `Prim` 关联的 `Vertex`                   | `prim->vertex();`       |
| `uint32 num_vertices()` | 获取 `Prim` 顶点数   | `m_num_vertices.load()`                  | `prim->num_vertices();` |
| `bool is_closed()`      | 检查 `Prim` 是否闭合 | `m_vertex && m_vertex->pre_vertex_ptr()` | `prim->is_closed();`    |

### `Prim` 变更方法

| 方法                                         | 作用             | 说明                          | 案例                                 |
| -------------------------------------------- | ---------------- | ----------------------------- | ------------------------------------ |
| `void set_vertex(Vertex* vertex)`            | 设置 `Vertex`    | 绑定 `Vertex`                 | `prim->set_vertex(v);`               |
| `void set_type(PrimType type)`               | 设置 `Prim` 类型 | 设为 `Polygon` 或 `Polyline`  | `prim->set_type(PrimType::Polygon);` |
| `void set_num_vertices(size_t num_vertices)` | 设置顶点数       | 设置 `Prim` 的 `num_vertices` | `prim->set_num_vertices(4);`         |
| `void remove_vertex(Vertex* vertex)`         | 移除 `Vertex`    | 删除 `Prim` 中的 `Vertex`     | `prim->remove_vertex(v);`            |
| `void increase_num_vertices()`               | 增加顶点数       | `m_num_vertices.fetch_add(1)` | `prim->increase_num_vertices();`     |
| `void decrease_num_vertices()`               | 减少顶点数       | `m_num_vertices.fetch_sub(1)` | `prim->decrease_num_vertices();`     |

### 总结

- `Point` 存储几何点，连接 `Vertex`
- `Vertex` 绑定 `Point` 和 `Prim`
- `Prim` 代表 `Polygon`、`Polyline`
- `Edge` 和 `HalfEdge` 代表拓扑结构
- `Prim` 的 `Vertex` 形成拓扑结构

## `Element.h/.cpp` 数据结构总结表格

### 核心元素数据结构

| 变量/类型          | 作用         | 说明                                                         | 案例                                                    |
| ------------------ | ------------ | ------------------------------------------------------------ | ------------------------------------------------------- |
| `SketchElement`    | 几何元素基类 | 所有 `Sketch` 元素的基类，提供基本属性和方法                 | `SketchPoint`、`SketchLine` 等                          |
| `ElementGroup`     | 元素组       | 存储 `SketchElement` 集合，管理多个元素                      | 立方体的所有 `Polygon` 组成一个 `ElementGroup`          |
| `SketchPoint`      | 几何点       | 继承自 `SketchElement`，存储 `nous::Point*`                  | 立方体的 8 个 `SketchPoint`                             |
| `SketchLine`       | 几何线       | 继承自 `SketchElement`，存储 `nous::Prim*`                   | 立方体的 12 条 `SketchLine`                             |
| `SketchRing`       | 几何环       | 继承自 `SketchElement`，存储 `nous::Prim*`                   | 立方体的 6 个 `SketchRing`                              |
| `SketchPolygon`    | 几何面       | 继承自 `SketchElement`，存储 `SketchRingPtr` 和 `inner_rings` | 立方体的 6 个 `SketchPolygon`                           |
| `EElementType`     | 元素类型枚举 | 定义几何类型，如 `Point`、`Line`、`Polygon`                  | `element->type() == EElementType::Polygon`              |
| `SketchElementPtr` | 共享指针     | `SketchElement` 的 `std::shared_ptr`                         | `SketchElementPtr p = std::make_shared<SketchPoint>();` |

### `SketchElement` 结构

| 变量/类型                            | 作用     | 说明                               | 案例                         |
| ------------------------------------ | -------- | ---------------------------------- | ---------------------------- |
| `uint32_t m_id`                      | 唯一 ID  | 每个 `SketchElement` 的唯一标识    | `element->id();`             |
| `EElementType m_type`                | 几何类型 | `Point, Line, Ring, Polygon`       | `element->type();`           |
| `SketchElementPtr m_parent`          | 父级元素 | 记录父 `Element`                   | `polygon->parent();`         |
| `ElementGroupPtr m_group`            | 所属分组 | 该 `Element` 归属的 `ElementGroup` | `element->group();`          |
| `save(SketchSerializer& serializer)` | 序列化   | 保存 `id` 和 `type`                | `element->save(serializer);` |
| `load(SketchSerializer& serializer)` | 反序列化 | 读取 `id` 和 `type`                | `element->load(serializer);` |

### `ElementGroup` 结构

| 变量/类型           | 作用         | 说明                                   | 案例                              |
| ------------------- | ------------ | -------------------------------------- | --------------------------------- |
| `bool m_need_check` | 是否需要检查 | 标记该 `ElementGroup` 是否需要检查     | `group->set_need_check(true);`    |
| `add_element()`     | 添加元素     | 向 `ElementGroup` 添加 `SketchElement` | `group->add_element(polygon);`    |
| `erase_element()`   | 删除元素     | 从 `ElementGroup` 删除 `SketchElement` | `group->erase_element(polygon);`  |
| `elements()`        | 获取所有元素 | 返回 `unordered_set<SketchElementPtr>` | `auto elems = group->elements();` |

### `SketchPoint` 结构

| 变量/类型            | 作用         | 说明                                   | 案例                                                         |
| -------------------- | ------------ | -------------------------------------- | ------------------------------------------------------------ |
| `nous::Point* point` | 绑定 `Point` | `SketchPoint` 绑定 `Mesh` 中的 `Point` | `SketchPointPtr p = std::make_shared<SketchPoint>(mesh_point);` |

### `SketchLine` 结构

| 变量/类型               | 作用        | 说明                      | 案例               |
| ----------------------- | ----------- | ------------------------- | ------------------ |
| `SketchPointPtr p0`     | 起点        | 记录 `SketchLine` 的起点  | `line->p0;`        |
| `SketchPointPtr p1`     | 终点        | 记录 `SketchLine` 的终点  | `line->p1;`        |
| `nous::Prim* line_prim` | 绑定 `Prim` | 该 `Line` 绑定的 `Prim`   | `line->line_prim;` |
| `size_t key`            | 唯一标识    | `SketchLine` 的唯一 `key` | `line->key;`       |

### `SketchRing` 结构

| 变量/类型               | 作用        | 说明                    | 案例               |
| ----------------------- | ----------- | ----------------------- | ------------------ |
| `nous::Prim* ring_prim` | 绑定 `Prim` | 该 `Ring` 绑定的 `Prim` | `ring->ring_prim;` |
| `nous::vec3 normal`     | 法向量      | `Ring` 的法向量         | `ring->normal;`    |
| `size_t key`            | 唯一标识    | `SketchRing` 的 `key`   | `ring->key;`       |

### `SketchPolygon` 结构

| 变量/类型                                       | 作用       | 说明                              | 案例                         |
| ----------------------------------------------- | ---------- | --------------------------------- | ---------------------------- |
| `bool m_changed`                                | 是否更改   | 记录 `Polygon` 是否被修改         | `polygon->m_changed = true;` |
| `nous::vec3 normal`                             | 法向量     | `Polygon` 的法向量                | `polygon->normal;`           |
| `SketchRingPtr ring`                            | 外环       | 该 `Polygon` 的外环               | `polygon->ring;`             |
| `std::unordered_set<SketchRingPtr> inner_rings` | 内环集合   | `Polygon` 的内部 `Ring`           | `polygon->inner_rings;`      |
| `std::vector<SketchPolygonTriangle> triangles`  | 三角形划分 | `Polygon` 被三角化后的 `Triangle` | `polygon->triangles;`        |

### `SketchElement` 相关方法

| 方法                                 | 作用                   | 说明                                       | 案例                         |
| ------------------------------------ | ---------------------- | ------------------------------------------ | ---------------------------- |
| `id()`                               | 获取 `ID`              | `SketchElement` 的唯一 `ID`                | `element->id();`             |
| `type()`                             | 获取类型               | `Point, Line, Polygon` 等                  | `element->type();`           |
| `parent()`                           | 获取父元素             | `Polygon` 可能属于 `ElementGroup`          | `polygon->parent();`         |
| `group()`                            | 获取 `ElementGroup`    | `ElementGroup` 管理多个 `Polygon`          | `polygon->group();`          |
| `to_point()`                         | 转换为 `SketchPoint`   | `std::dynamic_pointer_cast<SketchPoint>`   | `element->to_point();`       |
| `to_line()`                          | 转换为 `SketchLine`    | `std::dynamic_pointer_cast<SketchLine>`    | `element->to_line();`        |
| `to_ring()`                          | 转换为 `SketchRing`    | `std::dynamic_pointer_cast<SketchRing>`    | `element->to_ring();`        |
| `to_polygon()`                       | 转换为 `SketchPolygon` | `std::dynamic_pointer_cast<SketchPolygon>` | `element->to_polygon();`     |
| `save(SketchSerializer& serializer)` | 保存数据               | 序列化 `SketchElement`                     | `element->save(serializer);` |
| `load(SketchSerializer& serializer)` | 加载数据               | 反序列化 `SketchElement`                   | `element->load(serializer);` |

### 总结

- `SketchElement` 是所有几何元素的基类
- `SketchPoint` 代表点，绑定 `nous::Point`
- `SketchLine` 代表线，存储 `p0, p1`
- `SketchRing` 代表环，存储 `ring_prim`
- `SketchPolygon` 代表面，包含 `ring` 和 `inner_rings`
- `ElementGroup` 组织 `SketchElement`

